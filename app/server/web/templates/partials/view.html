{{define "view"}}
<div class="modal-header">
    <h2>View Key</h2>
    <div class="modal-header-right">
        {{if and .Format (ne .Format "text")}}<span class="format-badge">{{.Format}}</span>{{end}}
        <button class="modal-close" onclick="hideModal('main-modal')">&times;</button>
    </div>
</div>
<div class="modal-body">
    <div class="form-group">
        <label>Key</label>
        <div class="value-display">{{.Key}}</div>
    </div>
    <div class="form-group">
        <label>Value</label>
        {{if .IsBinary}}
        <span class="binary-indicator">Base64 encoded</span>
        <div class="value-display value-content">{{.Value}}</div>
        {{else}}
        <div class="value-display value-content highlighted-code">{{.HighlightedVal}}</div>
        {{end}}
    </div>
</div>
<div class="modal-footer">
    {{if .GitEnabled}}
    <button class="btn btn-secondary modal-footer-left"
            hx-get="{{.BaseURL}}/web/keys/history/{{.Key | urlEncode}}"
            hx-target="#modal-content"
            hx-swap="innerHTML"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>History</button>
    {{end}}
    <button class="btn btn-secondary" onclick="hideModal('main-modal')">Close</button>
    {{if .CanWrite}}
    <button class="btn btn-primary"
            hx-get="{{.BaseURL}}/web/keys/edit/{{.Key | urlEncode}}"
            hx-target="#modal-content"
            hx-swap="innerHTML">Edit</button>
    {{end}}
</div>
<style>
    #main-modal .modal { --modal-width: {{.ModalWidth}}px; }
    #main-modal .value-content { min-height: {{.TextareaHeight}}px; }
</style>
{{end}}
